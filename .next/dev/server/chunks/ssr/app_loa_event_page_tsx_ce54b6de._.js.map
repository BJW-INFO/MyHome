{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHomes/app/loa/event/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { custemAxios } from \"@/utils\";\r\nimport { useCallback, useEffect, useEffectEvent, useState } from \"react\";\r\n\r\nexport default function Event() {\r\n    const [events, setEvents] = useState<any[] | []>([]);\r\n\r\n    const getEventEffect = useEffectEvent(async () => {\r\n        try {\r\n            const response = await custemAxios.get<{ message: string; data: any[] }>('/loa/event');\r\n            if (response.status !== 200) { throw new Error(response.data.message); }\r\n            setEvents(response.data?.data as any[]);\r\n        }\r\n        catch (error) { console.error(\"loa/event api get error =>\", error); }\r\n    })\r\n\r\n    useEffect(() => { getEventEffect(); }, [])\r\n\r\n    const onChangeHandle = useCallback(async (e: React.ChangeEvent<HTMLSelectElement>, o: any) => {\r\n        e.stopPropagation();\r\n        try {\r\n            switch (e.target.value) {\r\n                case 'include': {\r\n                    const response = await custemAxios.post<{ message: string; }>('/loa/event', { contents: o.id } as any);\r\n                    if (response.status !== 200) { throw new Error(response.data.message); }\r\n                } break;\r\n                case `none`: {\r\n                    const response = await custemAxios.delete(`/loa/event`, { data: { content: o.id } } as any);\r\n                    if (response.status !== 200) { throw new Error((response.data as { message: string }).message); }\r\n                } break;\r\n            }\r\n            getEventEffect();\r\n        }\r\n        catch (error) { console.error(\"loa/event api post, delet, error =>\", error); }\r\n    }, []);\r\n\r\n    const onClickHandle = useCallback(async (e: any, o: any) => {\r\n        e.stopPropagation();\r\n        try {\r\n            const response = await custemAxios.put<{ message: string; }>('/loa/event', { id: o.id } as any);\r\n            if (response.status !== 200) { throw new Error(response.data.message); }\r\n            getEventEffect();\r\n        }\r\n        catch (error) { console.error(\"loa/event api post, delet, error =>\", error); }\r\n    }, []);\r\n\r\n\r\n    if (events.length === 0) return;\r\n    const todayEvent = events.filter(item => item.profile && item.profile.length > 0);\r\n    console.log(events);\r\n    return (<>\r\n        {todayEvent.length > 0 && (\r\n            <ul className='flex flex-col w-[100%] bg-white border border-gray-200 rounded-ml shadow-lg p-2'>\r\n                <li className='flex flex-row items-start justify-between pb-1 border-solid border-b-1 text-sm font-bold'>\r\n                    üéÅ Today Event\r\n                </li>\r\n                {events.filter(item => item.profile && item.profile.length > 0).map((o, i) =>\r\n                    <li key={i} className={`duration-600 items-center flex flex-row text-[0.75rem] mt-1.5 group rounded-md justify-between`}>\r\n                        <p>{o.etc.title}\r\n                            <small> {o.etc.date.end.substring(0, 10).replace(/-/g, '.')}</small>\r\n                        </p>\r\n                        <ul className=\"flex flex-row gap-2\">\r\n                            {o.profile.map((obj: any, key: any) =>\r\n                                <li\r\n                                    key={key}\r\n                                    className={`rounded-sm br-1 pr-2 pl-2 ${obj.etc.is_clear ? `bg-blue-200` : `bg-slate-200`}`}\r\n                                    onClick={(e) => onClickHandle(e, obj)}\r\n                                >\r\n                                    {obj.profiles.account}\r\n                                    {String(obj.profiles.character).padStart(2, '0')}\r\n                                </li>\r\n                            )}\r\n                        </ul>\r\n                    </li>\r\n                )}\r\n            </ul>\r\n        )}\r\n        <ul className=\"flex flex-row flex-wrap pb-4 pt-2\">\r\n            {events.map((o, i) =>\r\n                <li key={i} className=\"w-[49%] mr-[1%] mb-2 min-w-80 h-45 overflow-hidden rounded-md bg-gray-200\">\r\n                    <span className=\"flex flex-row text-sm mt-1 mb-1 pl-1 pr-2 justify-between\">\r\n                        <select onChange={(e) => onChangeHandle(e, o)} value={o.profile.length === 0 ? `none` : `include`}>\r\n                            <option>none</option>\r\n                            <option>include</option>\r\n                        </select>\r\n                    </span>\r\n                    <a href={o.etc.link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block group relative w-[100%]\">\r\n                        <img className=\"absolute inset-0 w-[100%] filter group-hover:brightness-35\" src={o.etc.img} />\r\n                        <div className=\"text-white absolute inset-0 p-2 flex flex-col opacity-0 group-hover:opacity-100\">\r\n                            <p>{o.etc.title}</p>\r\n                            <p>\r\n                                {o.etc.date.start.substring(0, 10).replace(/-/g, '.') + ' ~ ' + o.etc.date.end.substring(0, 10).replace(/-/g, '.')}\r\n                            </p>\r\n                            <b>{o.etc.date.reward && `${o.etc.date.reward.substring(0, 10).replace(/-/g, '.')}`}</b>\r\n                        </div>\r\n                    </a>\r\n                </li>\r\n            )}\r\n            {events.length % 2 === 1 && <li className=\"w-[45%] min-w-80 h-45 overflow-hidden\" />}\r\n        </ul>\r\n    </>)\r\n}"],"names":[],"mappings":"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"}}]
}