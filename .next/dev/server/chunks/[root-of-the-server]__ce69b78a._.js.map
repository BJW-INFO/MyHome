{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/routers.tsx"],"sourcesContent":["export interface RoutersProps {\r\n  path: string;\r\n  label: string;\r\n  children?: { path: string; label: string }[];\r\n}\r\n\r\nexport const routers: RoutersProps[] = [\r\n  {\r\n    path: '/real',\r\n    label: \"üë§ REAL\",\r\n  },\r\n  {\r\n    path: '/loa',\r\n    label: 'üéÆ Lost Ark',\r\n    children: [\r\n      { path: '/event', label: 'üéâ EVENT' },\r\n      { path: '/daily', label: 'üö∂ DAILY' },\r\n      { path: '/weekly', label: 'üìÖ WEEKLY' },\r\n    ],\r\n  },\r\n  {\r\n    path: '/maple',\r\n    label: 'üçÅ Maple Story',\r\n    children: [\r\n      { path: '/event', label: 'üéâ EVENT' },\r\n      { path: '/daily', label: 'üö∂ DAILY' },\r\n      { path: '/weekly', label: 'üìÖ WEEKLY' },\r\n    ],\r\n  },\r\n]"],"names":[],"mappings":";;;;AAMO,MAAM,UAA0B;IACrC;QACE,MAAM;QACN,OAAO;IACT;IACA;QACE,MAAM;QACN,OAAO;QACP,UAAU;YACR;gBAAE,MAAM;gBAAU,OAAO;YAAW;YACpC;gBAAE,MAAM;gBAAU,OAAO;YAAW;YACpC;gBAAE,MAAM;gBAAW,OAAO;YAAY;SACvC;IACH;IACA;QACE,MAAM;QACN,OAAO;QACP,UAAU;YACR;gBAAE,MAAM;gBAAU,OAAO;YAAW;YACpC;gBAAE,MAAM;gBAAU,OAAO;YAAW;YACpC;gBAAE,MAAM;gBAAW,OAAO;YAAY;SACvC;IACH;CACD"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/deepCopy.tsx"],"sourcesContent":["/**ÍπäÏùÄ Î≥µÏÇ¨*/\r\nexport const deepCopy = (obj:any) => JSON.parse(JSON.stringify(obj));"],"names":[],"mappings":"AAAA,QAAQ;;;;AACD,MAAM,WAAW,CAAC,MAAY,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/daysEnum.tsx"],"sourcesContent":["\r\nexport enum WeekCycles {\r\n    DAILY,\r\n    WEEKLY,\r\n    MONTHLY,\r\n    Quarterly,\r\n}\r\n\r\nexport enum DayOfWeek {\r\n    Sunday, \r\n    Monday, \r\n    Tuesday, \r\n    Wednesday, \r\n    Thursday, \r\n    Friday,\r\n    Saturday,\r\n}"],"names":[],"mappings":";;;;;;AACO,IAAA,AAAK,oCAAA;;;;;WAAA;;AAOL,IAAA,AAAK,mCAAA;;;;;;;;WAAA"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/costemStorage.tsx"],"sourcesContent":["\r\n/**ClientÏùò Storage ÏÇ¨Ïö©ÏùÑ Í∞ÑÏÜåÌôî*/\r\nexport const costemStorage = {\r\n    local: {\r\n        /**Ï∞æÍ∏∞ ÌõÑ ÏÉùÏÑ±*/\r\n        get: (key: string, value: any = null) => {\r\n            if (typeof window === 'undefined') return;\r\n            if (localStorage.getItem(key) === null) { costemStorage.local.set(key, value); }\r\n            return JSON.parse(localStorage.getItem(key) as string);\r\n        },\r\n        /**ÏÉùÏÑ±*/\r\n        set: (key: string, value: any) => {\r\n            if (typeof window === 'undefined') return;\r\n            const valueToJson = JSON.stringify(value);\r\n            localStorage.setItem(key, valueToJson);\r\n            return localStorage.getItem(key);\r\n        },\r\n        /**Îã®Ïùº ÏÇ≠Ï†ú*/\r\n        remove: (key: string) => {\r\n            if (typeof window === 'undefined') return;\r\n            localStorage.removeItem(key);\r\n        },\r\n        /**Î™®Îëê ÏÇ≠Ï†ú*/\r\n        clear: () => {\r\n            if (typeof window === 'undefined') return;\r\n            localStorage.clear();\r\n        }\r\n    }\r\n}"],"names":[],"mappings":"AACA,0BAA0B;;;;AACnB,MAAM,gBAAgB;IACzB,OAAO;QACH,UAAU,GACV,KAAK,CAAC,KAAa,QAAa,IAAI;YAChC,wCAAmC;;;QAGvC;QACA,KAAK,GACL,KAAK,CAAC,KAAa;YACf,wCAAmC;;;YACnC,MAAM;QAGV;QACA,QAAQ,GACR,QAAQ,CAAC;YACL,wCAAmC;;;QAEvC;QACA,QAAQ,GACR,OAAO;YACH,wCAAmC;;;QAEvC;IACJ;AACJ"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/aixos/costem.tsx"],"sourcesContent":["import { costemStorage } from \"@/utils\";\r\nimport axios from \"axios\";\r\n\r\nconst instance = () => {\r\n    const init = axios.create({\r\n        baseURL: '/api',\r\n        headers: { 'Content-Type': 'application/json' }\r\n    });\r\n    init.interceptors.request.use((config:any) => {\r\n        config.headers['X-User-Password'] = costemStorage.local.get('auth');\r\n        return config;\r\n    });\r\n    return init;\r\n};\r\n\r\nexport const costemAxios = instance();"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEA,MAAM,WAAW;IACb,MAAM,OAAO,kJAAK,CAAC,MAAM,CAAC;QACtB,SAAS;QACT,SAAS;YAAE,gBAAgB;QAAmB;IAClD;IACA,KAAK,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC3B,OAAO,OAAO,CAAC,kBAAkB,GAAG,0IAAa,CAAC,KAAK,CAAC,GAAG,CAAC;QAC5D,OAAO;IACX;IACA,OAAO;AACX;AAEO,MAAM,cAAc"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/jotai/auth.tsx"],"sourcesContent":["`use client`;\r\nimport { atom } from \"jotai\";\r\nexport const authAtom = atom<boolean>(false);\r\nexport const authLoadingAtom = atom<boolean>(false);"],"names":[],"mappings":";;;;;;AACA;AADA,CAAC,UAAU,CAAC;;AAEL,MAAM,WAAW,IAAA,kJAAI,EAAU;AAC/B,MAAM,kBAAkB,IAAA,kJAAI,EAAU"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/utils/index.tsx"],"sourcesContent":["export { routers } from './routers';\r\nexport type { RoutersProps } from './routers';\r\nexport { deepCopy } from './deepCopy';\r\nexport { WeekCycles, DayOfWeek } from './daysEnum';\r\nexport { costemStorage } from './costemStorage';\r\nexport { costemAxios } from './aixos/costem';\r\nexport {\r\n    authAtom,\r\n    authLoadingAtom,\r\n} from './jotai/auth'"],"names":[],"mappings":";AAAA;AAEA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/app/api/props.tsx"],"sourcesContent":["import dayjs from \"dayjs\";\r\nimport duration from 'dayjs/plugin/duration';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport timezone from 'dayjs/plugin/timezone';\r\nimport { createClient } from '@supabase/supabase-js'\r\nimport { deepCopy, WeekCycles } from \"@/utils\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\ndayjs.extend(duration);\r\ndayjs.extend(utc);\r\ndayjs.extend(timezone);\r\n\r\n/**\r\n * ÎπÑÎ∞ÄÎ≤àÌò∏ Ïú†Ìö® Ïó¨Î∂Ä\r\n * @param pw password input\r\n * @returns password validity\r\n */\r\nexport const isPassword = (pw: string | null) => {\r\n    return pw !== null && process.env.WEB_PASS_KEY === pw;\r\n}\r\n\r\nexport const passwordError = NextResponse.json(\r\n    { message: \"Unauthorized Request\", data: [], },\r\n    { status: 401 }\r\n);\r\n\r\nexport class CustomError extends Error {\r\n    public status: number;\r\n    public error: any;\r\n    constructor(message: string, error: any, status: number) {\r\n        console.log(message + error);\r\n        super(message);\r\n        this.error = error;\r\n        this.status = status;\r\n    }\r\n}\r\n\r\nexport function CustomResponse<T>(data?: T | T[] | null, message: string = 'success'): NextResponse {\r\n    return NextResponse.json(\r\n        {\r\n            message,\r\n            data: data\r\n        },\r\n        { status: 200 }\r\n    );\r\n}\r\n\r\n/** ÏäàÌçºÎ≤†Ïù¥Ïä§ Ïó∞Í≤∞ */\r\nexport const supabase = createClient(\r\n    process.env.SUPABASE_API_BASE as string,\r\n    process.env.SUPABASE_API_KEY as string\r\n)\r\n\r\nexport const getCategories = async (type: string, name: string): Promise<number> => {\r\n    let result = 0;\r\n    try {\r\n        const { data, error }: any = await supabase\r\n            .from('categories')\r\n            .select('id')\r\n            .eq('type', type.toUpperCase()).eq('name', name.toUpperCase())\r\n            .single();\r\n        if (error) { throw error; } else { result = data.id; }\r\n    }\r\n    catch (error) { console.error(`getCategroies error:`, error); }\r\n    finally { return result }\r\n}\r\n\r\ntype SchedulerUpdated = (props: schedulerFuncstionProps & { category: number }) => Promise<any>;\r\ntype SchedulerCallback = (props: schedulerFuncstionProps) => Promise<any>;\r\n\r\ninterface schedulerFuncstionProps {\r\n    category: number,\r\n    contents: any,\r\n}\r\n\r\ninterface schedulerProps {\r\n    category: number | { type: string, name: string },\r\n    updated?: SchedulerUpdated,\r\n    callback?: SchedulerCallback,\r\n}\r\n\r\nconst schedulerUpdated: SchedulerUpdated = async (props: schedulerFuncstionProps) => {\r\n    let { contents } = deepCopy(props);\r\n    try {\r\n        const { error: updateError }: any = await supabase.rpc(`update_loa_event_contents`, {\r\n            p_id: contents.map((data: any) => data.id),\r\n            p_is_clear: false,\r\n        });\r\n        if (updateError) { return false; }\r\n        for (const content of contents) { content.etc.is_clear = false; }\r\n        return contents;\r\n    }\r\n    catch (error) {\r\n        console.error(`schedulerCallback error:`, error);\r\n        return undefined;\r\n    }\r\n}\r\n\r\nconst schedulerCallback: SchedulerCallback = async (props: schedulerFuncstionProps) => props.contents;\r\n\r\nexport async function scheduler(props: schedulerProps): Promise<any> {\r\n    const { category: option, callback = schedulerCallback, updated = schedulerUpdated, } = props;\r\n    const today = dayjs().tz('Asia/Seoul');\r\n    try {\r\n        const category = typeof option === 'number' ? option : await getCategories(option.type, option.name)\r\n        if (!category || category === 0) { return new Error(`not find categories`); }\r\n\r\n        const { data: schedule, error: scheduleError }: any = await supabase.from(`schedulers`).select(`*`).eq(`category`, category).single();\r\n        if (scheduleError) { throw scheduleError; }\r\n\r\n        const { data: contents, error: contentsError }: any = await supabase.from('contents').select(`*`).eq('category', category);\r\n        if (contentsError) { throw contentsError }\r\n\r\n        if (dayjs(schedule.updated_at).isBefore(today.startOf('day')) && today.hour() >= schedule.update_time) {\r\n            switch (schedule.update_cycle) {\r\n                case WeekCycles.DAILY:\r\n                case WeekCycles.WEEKLY: {\r\n                    if (schedule.update_weeks.length !== 0) {\r\n                        if (!schedule.update_weeks.includes(today.day())) { return await callback({ contents: contents, category }) }\r\n                    }\r\n                    else if (schedule.update_cycle === WeekCycles.WEEKLY) { throw new Error(`Weekly schedule not update_weeks`) }\r\n                } break;\r\n                case WeekCycles.MONTHLY:\r\n                case WeekCycles.Quarterly: {\r\n                    /*\r\n                    2 => ÏõîÍ∞ÑÌôïÏù∏ [] Ìï¥Îãπ ÏõîÏù¥ ÏßÄÎÇ¨ÎäîÏßÄ ÌôïÏù∏\r\n                    3 => ÎÇ†ÏßúÎ°ú ÌôïÏù∏\r\n                    ÏõîÍ∞ÑÏùÄ Í∞ïÏ†úÎ°ú Ìï¥ÎãπÎã¨Ïùò 1ÏùºÎ°ú Î∞îÍøîÎ≤ÑÎ¶∞Îã§.\r\n                    */\r\n\r\n                } break;\r\n            }\r\n        }\r\n        const update = await updated({ contents: contents, category: category });\r\n        if (update !== undefined) {\r\n            const { error: clearError } = await supabase.from('schedulers').update({ update_at: new Date().toISOString() }).eq('category', category);\r\n            if (clearError) { throw clearError }\r\n            return Promise.resolve(await callback({ contents: update, category: category }));\r\n        }\r\n    }\r\n    catch (error) {\r\n        console.error(`scheduler error:`, error);\r\n        return Promise.resolve([]);\r\n    }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/app/api/loa/route.tsx"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const lostArkApi = {\r\n    event: async () => {\r\n        try {\r\n            const response = await axios.get(\r\n                `${process.env.LOSTARK_API_BASE}/news/events`,\r\n                {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        Authorization: `bearer ${process.env.LOSTARK_API_KEY}`,\r\n                    },\r\n                }\r\n            );\r\n            return response.data;\r\n        }\r\n        catch (error: any) { console.error(\"api/loa error:\", error.message); }\r\n    },\r\n    calendar: async () => {\r\n        try {\r\n            const response = await axios.get(\r\n                `${process.env.LOSTARK_API_BASE}/gamecontents/calendar`,\r\n                {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        Authorization: `bearer ${process.env.LOSTARK_API_KEY}`,\r\n                    },\r\n                }\r\n            );\r\n            return response.data;\r\n        }\r\n        catch (error: any) { console.error(\"api/loa error:\", error.message); }\r\n    }\r\n} "],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,aAAa;IACtB,OAAO;QACH,IAAI;YACA,MAAM,WAAW,MAAM,kJAAK,CAAC,GAAG,CAC5B,GAAG,QAAQ,GAAG,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAC7C;gBACI,SAAS;oBACL,QAAQ;oBACR,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,eAAe,EAAE;gBAC1D;YACJ;YAEJ,OAAO,SAAS,IAAI;QACxB,EACA,OAAO,OAAY;YAAE,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;QAAG;IACzE;IACA,UAAU;QACN,IAAI;YACA,MAAM,WAAW,MAAM,kJAAK,CAAC,GAAG,CAC5B,GAAG,QAAQ,GAAG,CAAC,gBAAgB,CAAC,sBAAsB,CAAC,EACvD;gBACI,SAAS;oBACL,QAAQ;oBACR,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,eAAe,EAAE;gBAC1D;YACJ;YAEJ,OAAO,SAAS,IAAI;QACxB,EACA,OAAO,OAAY;YAAE,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;QAAG;IACzE;AACJ"}},
    {"offset": {"line": 513, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/app/api/loa/props.tsx"],"sourcesContent":["\r\ninterface Profile {\r\n  id: number;\r\n  account: string;\r\n  character: number;\r\n}\r\n\r\n// Ïù¥Í±∞ Î∞∞Ïó¥Î°ú Î∞îÍøîÏ§òÏïºÎêå ÌÉÄÏûÖ -> Î∞∞Ïó¥Î°úÎ∞îÍøîÏÑú Ï†ëÍ∑º \r\nexport const contentsSort = (data: any[],type:string): any[] => {\r\n  return [...data].sort((a, b) => {\r\n    // profiles Í∞ùÏ≤¥ ÎÇ¥Î∂ÄÏùò Í∞íÏóê Ï†ëÍ∑º (ÌïµÏã¨!)\r\n    const accA = a[type]?.account ?? '';\r\n    const accB = b[type]?.account ?? '';\r\n\r\n    const getWeight = (val: string) => {\r\n      if (val === 'U') return 0;  // 1Îì±: U\r\n      if (val === '') return 1;   // 2Îì±: Îπà Í∞í\r\n      return 2;                   // 3Îì±: ÎÇòÎ®∏ÏßÄ\r\n    };\r\n\r\n    const weightA = getWeight(accA);\r\n    const weightB = getWeight(accB);\r\n\r\n    if (weightA !== weightB) {\r\n      return weightA - weightB;\r\n    }\r\n\r\n    if (accA !== accB) {\r\n      return accA.localeCompare(accB);\r\n    }\r\n\r\n    // characterÎèÑ profiles ÏïàÏóê ÏûàÏúºÎØÄÎ°ú Í≤ΩÎ°ú ÏàòÏ†ï\r\n    return (a.profiles?.character ?? 0) - (b.profiles?.character ?? 0);\r\n  });\r\n};"],"names":[],"mappings":";;;;AAQO,MAAM,eAAe,CAAC,MAAY;IACvC,OAAO;WAAI;KAAK,CAAC,IAAI,CAAC,CAAC,GAAG;QACxB,8BAA8B;QAC9B,MAAM,OAAO,CAAC,CAAC,KAAK,EAAE,WAAW;QACjC,MAAM,OAAO,CAAC,CAAC,KAAK,EAAE,WAAW;QAEjC,MAAM,YAAY,CAAC;YACjB,IAAI,QAAQ,KAAK,OAAO,GAAI,QAAQ;YACpC,IAAI,QAAQ,IAAI,OAAO,GAAK,UAAU;YACtC,OAAO,GAAqB,UAAU;QACxC;QAEA,MAAM,UAAU,UAAU;QAC1B,MAAM,UAAU,UAAU;QAE1B,IAAI,YAAY,SAAS;YACvB,OAAO,UAAU;QACnB;QAEA,IAAI,SAAS,MAAM;YACjB,OAAO,KAAK,aAAa,CAAC;QAC5B;QAEA,oCAAoC;QACpC,OAAO,CAAC,EAAE,QAAQ,EAAE,aAAa,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,aAAa,CAAC;IACnE;AACF"}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/A0_Win_NoteBook/Documents/MyHome/app/api/loa/event/route.tsx"],"sourcesContent":["import dayjs from \"dayjs\";\r\nimport duration from 'dayjs/plugin/duration';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport timezone from 'dayjs/plugin/timezone';\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { CustomError, CustomResponse, getCategories, isPassword, passwordError, scheduler, supabase } from \"@api/props\";\r\nimport { lostArkApi } from \"../route\";\r\nimport { contentsSort } from \"../props\";\r\n\r\ndayjs.extend(duration);\r\ndayjs.extend(utc);\r\ndayjs.extend(timezone);\r\n\r\n\r\nexport interface LoaEventEtcProp {\r\n    title: string,\r\n    img: string,\r\n    link: string,\r\n    date: {\r\n        start: string,\r\n        end: string,\r\n        reward: string | null,\r\n    }\r\n}\r\n\r\nexport interface LoaEventProfileProp {\r\n    is_clear: boolean,\r\n    profiles: {\r\n        id: number,\r\n        account: string,\r\n        character: number,\r\n    }\r\n}\r\n\r\nexport interface LoaEventProp {\r\n    id: number,\r\n    category: number,\r\n    updateAt: string,\r\n    profile: LoaEventProfileProp,\r\n    etc: LoaEventEtcProp,\r\n}\r\n\r\nexport const eventPatten = async (events: any): Promise<any> => {\r\n    const today = dayjs().tz('Asia/Seoul');\r\n    let contents: LoaEventProp[] = [];\r\n    try {\r\n        const setScheduler = await scheduler({\r\n            category: { type: 'LOA', name: 'EVENT' },\r\n            updated: async ({ contents, category }) => {\r\n                try {\r\n                    let duplications: { delete: LoaEventProp[], update: LoaEventProp[] } = { delete: [], update: [] };\r\n                    for (const content of contents) {\r\n                        if (events.find((event: any) => event.Title === content.etc.title)) {\r\n                            const end = today.isAfter(dayjs(content.end).tz('Asia/Seoul'), `day`);\r\n                            duplications[end ? 'delete' : 'update'].push(content);\r\n                        }\r\n                    }\r\n                    for (const [action, content] of Object.entries(duplications)) {\r\n                        const arry = content.map((content: LoaEventProp) => content.id);\r\n                        await supabase.rpc(`${action}_loa_event_contents`, {\r\n                            p_parents: arry,\r\n                            ...(action === 'update' ? { p_is_clear: false } : {})\r\n                        })\r\n                    }\r\n                    for (const event of events) {\r\n                        if (duplications.update.find((content: LoaEventProp) => content.etc.title === event.Title)) { continue; }\r\n                        const { data, error } = await supabase.rpc(`insert_loa_event_contents`, {\r\n                            p_category: category,\r\n                            p_etc: {\r\n                                title: event.Title,\r\n                                img: event.Thumbnail,\r\n                                link: event.Link,\r\n                                date: {\r\n                                    start: event.StartDate,\r\n                                    end: event.EndDate,\r\n                                    reward: event.RewardDate || null,\r\n                                }\r\n                            } as LoaEventEtcProp\r\n                        })\r\n                        duplications.update.push(data);\r\n                    }\r\n                    return duplications.update;\r\n                }\r\n                catch (error) {\r\n                    console.log(error);\r\n                    return undefined;\r\n                }\r\n            },\r\n            callback: async ({ contents }) => {\r\n                let result: LoaEventProp[] = [];\r\n                for (const content of contents) {\r\n                    const { data } = await supabase.from('contents').select('id, etc, profiles:profile(*)').eq('parent', content.id);\r\n                    const sortedData = data ? contentsSort(data,`profiles`) : [];\r\n                    result.push({\r\n                        ...content,\r\n                        profile: sortedData // Ï†ïÎ†¨Îêú Îç∞Ïù¥ÌÑ∞Í∞Ä Îì§Ïñ¥Í∞ê\r\n                    });\r\n                }\r\n                return result;\r\n            }\r\n        })\r\n        contents = setScheduler;\r\n    }\r\n    catch (error: any) { throw error; }\r\n    return contents;\r\n}\r\n\r\nexport async function GET(req: NextRequest) {\r\n    if (!isPassword(req.headers.get(\"X-User-Password\"))) { return passwordError; }\r\n    try {\r\n        const events = await lostArkApi.event();\r\n        const response = await eventPatten(events);\r\n        return CustomResponse(response);\r\n    }\r\n    catch (e: any) {\r\n        if (e instanceof CustomError) {\r\n            console.error(`${e.message}`, e.error);\r\n            return NextResponse.json(\r\n                { message: e.message, data: [], },\r\n                { status: e.status },\r\n            );\r\n        }\r\n        return NextResponse.json(\r\n            { message: 'An unexpected error occurred during API processing.', data: [], },\r\n            { status: 500 },\r\n        );\r\n    }\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n    if (!isPassword(req.headers.get(\"X-User-Password\"))) { return passwordError; }\r\n    try {\r\n        const { contents } = await req.json();\r\n        const category = await getCategories('LOA', 'EVENT_ACTIVE');\r\n        const { data } = await supabase.from('profiles').select('id').eq('type', 'LOA').eq(`character`, 0).neq('account', '');\r\n        const { error: initError }: any = await supabase.rpc(`insert_contents`, {\r\n            p_category: category,\r\n            p_parent: contents,\r\n            p_profiles: data?.map(d => d.id)\r\n        });\r\n        if (initError) { throw new CustomError('loa/event => insert error', initError, 500) }\r\n        return CustomResponse();\r\n    }\r\n    catch (e: any) {\r\n        console.log('loa/event => insert error:', e.error);\r\n        return NextResponse.json(\r\n            { message: e.message, data: [], },\r\n            { status: e.status },\r\n        );\r\n    }\r\n}\r\n\r\nexport async function DELETE(req: NextRequest) {\r\n    if (!isPassword(req.headers.get(\"X-User-Password\"))) { return passwordError; }\r\n    try {\r\n        const { content } = await req.json();\r\n        const category = await getCategories('LOA', 'EVENT_ACTIVE');\r\n        const { error: deleteError }: any = await supabase.rpc(`delete_parent_contents`, {\r\n            p_category: category,\r\n            p_parent: content,\r\n        })\r\n        if (deleteError) { throw new CustomError('loa/event => delete error', deleteError, 500) }\r\n        return CustomResponse();\r\n    }\r\n    catch (e: any) {\r\n        console.log('loa/event => delete error:', e.error);\r\n        return NextResponse.json(\r\n            { message: e.message, data: [], },\r\n            { status: e.status },\r\n        );\r\n    }\r\n}\r\n\r\nexport async function PUT(req: NextRequest) {\r\n    if (!isPassword(req.headers.get(\"X-User-Password\"))) { return passwordError; }\r\n    try {\r\n        const { id } = await req.json();\r\n        const { data } = await supabase.from('contents').select('etc').eq('id', id).single();\r\n        const { error } = await supabase\r\n            .from('contents')\r\n            .update({ etc: { ...data?.etc, is_clear: !data?.etc.is_clear } })\r\n            .eq('id', id);\r\n        if (error) { throw new CustomError('loa/event => update error', error, 500) }\r\n        return CustomResponse();\r\n    }\r\n    catch (e: any) {\r\n        console.log('loa/event => insert error:', e.error);\r\n        return NextResponse.json(\r\n            { message: e.message, data: [], },\r\n            { status: e.status },\r\n        );\r\n    }\r\n}"],"names":[],"mappings":"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"}}]
}